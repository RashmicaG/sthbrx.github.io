<!DOCTYPE html>
<html lang="en">
<head>
          <title>Store Half Byte-Reverse Indexed</title>
        <meta charset="utf-8" />
        <link href="https://sthbrx.github.io/atom.xml" type="application/atom+xml" rel="alternate" title="Store Half Byte-Reverse Indexed Full Atom Feed" />
        <link href="https://sthbrx.github.io/rss.xml" type="application/rss+xml" rel="alternate" title="Store Half Byte-Reverse Indexed RSS Feed" />


    <meta name="tags" content="petitboot" />
    <meta name="tags" content="goodposts" />
    <meta name="tags" content="realcontent" />
    <meta name="tags" content="netboot" />
    <meta name="tags" content="pxe" />

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://sthbrx.github.io/">Store Half Byte-Reverse Indexed <strong>A Power Technical Blog</strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="https://sthbrx.github.io/blog/2016/07/05/optical-action-at-a-distance/" rel="bookmark"
         title="Permalink to Optical Action at a Distance">Optical Action at a Distance</a></h2>
 
  </header>
  <footer class="post-info">
    <time class="published" datetime="2016-07-05T15:23:00+10:00">
      Tue 05 July 2016
    </time>
    <address class="vcard author">
      By           <a class="url fn" href="https://sthbrx.github.io/author/samuel-mendoza-jonas.html">Samuel Mendoza-Jonas</a>
    </address>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <p>Generally when someone wants to install a Linux distro they start with an ISO
file. Now we could burn that to a DVD, walk into the server room, and put it in
our machine, but that's a pain. Instead let's look at how to do this over the
network with Petitboot!</p>
<p>At the moment Petitboot won't be able to handle an ISO file unless it's
mounted in an expected place (eg. as a mounted DVD), so we need to unpack it
somewhere. Choose somewhere to host the result and unpack the ISO via whatever
method you prefer. (For example <code>bsdtar -xf /path/to/image.iso</code>).</p>
<p>You'll get a bunch of files but for our purposes we only care about a few; the
kernel, the initrd, and the bootloader configuration file. Using
the Ubuntu 16.04 ppc64el ISO as an example, these are:</p>
<div class="highlight"><pre><span></span>./install/vmlinux
./install/initrd.gz.
./boot/grub/grub.cfg
</pre></div>


<p>In grub.cfg we can see that the boot arguments are actually quite simple:</p>
<div class="highlight"><pre><span></span>set timeout=-1

menuentry &quot;Install&quot; {
    linux   /install/vmlinux tasks=standard pkgsel/language-pack-patterns= pkgsel/install-language-support=false --- quiet
    initrd  /install/initrd.gz
}

menuentry &quot;Rescue mode&quot; {
    linux   /install/vmlinux rescue/enable=true --- quiet
    initrd  /install/initrd.gz
}
</pre></div>


<p>So all we need to do is create a PXE config file that points Petitboot towards
the correct files.</p>
<p>We're going to create a PXE config file which you could serve from your DHCP
server, but that does not mean we need to use PXE - if you just want a quick
install you only need make these files accessible to Petitboot, and then we can
use the 'Retrieve config from URL' option to download the files.</p>
<p>Create a petitboot.conf file somewhere accessible that contains (for Ubuntu):</p>
<div class="highlight"><pre><span></span>label Install Ubuntu 16.04 Xenial Xerus
    kernel http://myaccesibleserver/path/to/vmlinux
    initrd http://myaccesibleserver/path/to/initrd.gz
    append tasks=standard pkgsel/language-pack-patterns= pkgsel/install-language-support=false --- quiet
</pre></div>


<p>Then in Petitboot, select 'Retrieve config from URL' and enter
<code>http://myaccesibleserver/path/to/petitboot.conf</code>. In the main menu your new
option should appear - select it and away you go!</p>
  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>